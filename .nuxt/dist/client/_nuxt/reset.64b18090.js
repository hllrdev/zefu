import{_ as v}from"./Input.719645d5.js";import{_ as P}from"./layout.57285c1e.js";import{f as $,s as A,g as C,h as k,i as R,j as V,w as S,k as q,o as i,a as o,b as d,l as t,c as p,t as l,m as h,q as B}from"./entry.58710a5b.js";import{u as L,c as r,r as _,m as D,s as M}from"./index.d6913887.js";const N={action:"",class:"py-6"},U=o("h1",{class:"text-center pb-6"},"Resetar senha",-1),I={class:"mb-1"},j={key:0,class:"text-error font-medium text-xs"},z={class:"pb-6"},F={key:0,class:"text-error font-medium text-xs"},G={__name:"reset",setup(T){const c=$(),f=A(),w=C(),g=q().public.API_URL,b=async()=>{if(e.value.$validate(),!e.value.$error){const m=a.password;await B(`${g}/auth/reset`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.query.token},body:{password:m},onResponse({response:s}){s.status==200?(c.setAlert(!0,"success","Senha resetada com sucesso!"),w.push("/auth/signin")):c.setAlert(!0,"error","Houve um problema. A senha não foi resetada.")}},"$CQoZh6Vzxb")}},a=k({password:"",confirmPassword:""}),x=R(()=>({password:{required:r.withMessage("Preencha o e-mail",_),minLength:r.withMessage("É preciso no minímo 6 caracteres",D(6))},confirmPassword:{required:r.withMessage("Preencha o e-mail",_),sameAs:r.withMessage("As senhas são diferentes",M(a.password))}})),e=L(x,a);return(m,s)=>{const u=v,y=P;return i(),V(y,{name:"auth"},{content:S(()=>[o("div",null,[o("form",N,[U,o("div",I,[d(u,{name:"password",type:"password",label:"Senha",placeholder:"Digite a nova senha","onUpdate:modelValue":s[0]||(s[0]=n=>t(a).password=n)}),t(e).password.$error?(i(),p("span",j,l(t(e).password.$errors[0].$message),1)):h("",!0)]),o("div",z,[d(u,{name:"confirmPassword",type:"password",label:"Confirmar senha",placeholder:"Digite a senha novamente","onUpdate:modelValue":s[1]||(s[1]=n=>t(a).confirmPassword=n)}),t(e).confirmPassword.$error?(i(),p("span",F,l(t(e).confirmPassword.$errors[0].$message),1)):h("",!0)]),o("button",{type:"button",class:"btn btn-secondary w-full text-neutral-50",onClick:b},"Resetar")])])]),_:1})}}};export{G as default};
