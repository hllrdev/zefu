{"version":3,"file":"list-17d1c03f.js","sources":["../../../../pages/products/list.vue"],"sourcesContent":["<script setup>\n    import { useAppStore } from '~/store/appStore';\n\n    const runtimeConfig = useRuntimeConfig();\n    const API_URL = runtimeConfig.public.API_URL;\n\n    const appStore = useAppStore();\n    const products = ref([]);\n    const deleteProductId = ref(''); \n\n    onMounted(async () => {    \n        const data = await useFetch(`${API_URL}/products`,\n        {\n            headers: {\n                'Authorization': `Bearer ${localStorage.getItem('token')}`,\n            }\n        });\n        products.value = data.value;\n    })\n\n    const showDialogDeleteProduct = (id) => {\n        deleteProductId.value = id;\n        const deleteDialog = document.getElementById('delete_dialog');\n        deleteDialog.showModal();\n    }\n    const submitDeleteProduct = async () => {\n\n        await $fetch(`${API_URL}/products/${deleteProductId.value}`,\n        {\n            method: 'DELETE',\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('token')\n            }\n        }\n        ).then(() => {\n            products.value = products.value.filter(product => product.id != deleteProductId.value);\n            deleteProductId.value = '';\n            appStore.setAlert(true, 'success', \"Produto excluído com sucesso.\");\n\n        }).catch(() => {\n            appStore.setAlert(true, 'error', \"Houve um erro na tentativa de exclusão.\")\n        })\n    }\n</script>\n\n<template>\n    <NuxtLayout name=\"main\">\n        <template #content>\n            <div class=\"pt-24 px-4 pb-10\">\n                <h1 class=\"text-center pb-6\">Gerenciamento de produtos</h1>\n                <div class=\"flex justify-center\">\n                    <div class=\"md:w-4/5 lg:w-3/5\">\n                        <div class=\"flex justify-end md:pr-6 pb-6\">\n                            <NuxtLink class=\"btn hover:text-primary\" to=\"/products/add\">\n                                <div class=\"flex items-center gap-2\">\n                                    Cadastrar\n                                    <Icon class=\"w-6 h-auto\" name=\"gridicons:add\" color=\"white\"></Icon>\n                                </div>   \n                            </NuxtLink>\n                        </div>\n                        <div class=\"overflow-x-auto\">\n                            <table class=\"table\">\n                                <thead>\n                                    <tr>\n                                        <th>Produto</th>\n                                        <th>Ações</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr v-for=\"product in products\" :key=\"product.id\">\n                                        <NuxtLink :to=\"{\n                                            path: '/products/view',\n                                            query: {\n                                                title: product.title,\n                                                link: product.link,\n                                                photo: product.photo\n                                            }}\">\n                                            <td>\n                                                <div class=\"flex items-center\">\n                                                    <div class=\"avatar\">\n                                                        <div class=\"mask mask-squircle w-12 h-12\">\n                                                            <img :src=\"`${API_URL}/static${product.photo}`\" alt=\"Photo product\" />\n                                                        </div>\n                                                    </div>\n                                                    <span>{{ product.title }}</span>\n                                                </div>\n                                            </td>\n                                        </NuxtLink>\n                                        <td>\n                                            <div class=\"flex flex-col md:flex-row justify-center items-center\">\n                                                <NuxtLink :to=\"{\n                                                    path: '/products/edit',\n                                                    query: {\n                                                        id: product.id,\n                                                        title: product.title,\n                                                        link: product.link,\n                                                        photo: product.photo\n                                                    }\n                                                }\">\n                                                    <Icon class=\"cursor-pointer w-6 h-auto hover:text-primary\" name=\"material-symbols:edit\" />\n                                                </NuxtLink> \n                                                <div @click=\"showDialogDeleteProduct(product.id)\">\n                                                    <Icon class=\"cursor-pointer w-6 h-auto hover:text-primary\" name=\"material-symbols:delete\"/> \n                                                </div>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                        <dialog id=\"delete_dialog\" class=\"modal modal-bottom sm:modal-middle\">\n                            <form method=\"dialog\" class=\"modal-box bg-neutral-100\">\n                                <h3 class=\"font-bold text-lg\">Excluir produto</h3>\n                                <p class=\"py-4\">Deseja excluir esse produto?</p>\n                                <div class=\"modal-action\">\n                                <!-- if there is a button in form, it will close the modal -->\n                                <button class=\"btn hover:bg-neutral-900\" @click=\"deleteProductId = ''\">Cancelar</button>\n                                <button class=\"btn hover:bg-red-600 hover:border-red-600\" @click=\"submitDeleteProduct\">Confirmar</button>\n                                </div>\n                            </form>\n                        </dialog>\n                    </div>\n                </div>\n            </div>\n        </template>\n    </NuxtLayout>\n</template>\n\n<style scoped>\n    td {\n        padding: 0.5rem;\n    }\n\n    td * {\n        margin: 0.25rem;\n    }\n    \n    tr th {\n        color: #000;\n    }\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGI,UAAM,gBAAiC;AACvC,UAAM,UAAU,cAAc,OAAO;AAErC,UAAM,WAAW;AACjB,UAAM,WAAW,IAAI,CAAA,CAAE;AACvB,UAAM,kBAAkB,IAAI,EAAE;AAY9B,UAAM,0BAA0B,CAAC,OAAO;AACpC,sBAAgB,QAAQ;AACxB,YAAM,eAAe,SAAS,eAAe,eAAe;AAC5D,mBAAa,UAAS;AAAA,IACzB;AACD,UAAM,sBAAsB,YAAY;AAEpC,YAAM;AAAA,QAAO,GAAG,oBAAoB,gBAAgB;AAAA,QACpD;AAAA,UACI,QAAQ;AAAA,UACR,SAAS;AAAA,YACL,iBAAiB,YAAY,aAAa,QAAQ,OAAO;AAAA,UAC5D;AAAA,QACJ;AAAA,MACA,EAAC,KAAK,MAAM;AACT,iBAAS,QAAQ,SAAS,MAAM,OAAO,aAAW,QAAQ,MAAM,gBAAgB,KAAK;AACrF,wBAAgB,QAAQ;AACxB,iBAAS,SAAS,MAAM,WAAW,+BAA+B;AAAA,MAE9E,CAAS,EAAE,MAAM,MAAM;AACX,iBAAS,SAAS,MAAM,SAAS,yCAAyC;AAAA,MACtF,CAAS;AAAA,IACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}