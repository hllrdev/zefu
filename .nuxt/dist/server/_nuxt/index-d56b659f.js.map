{"version":3,"file":"index-d56b659f.js","sources":["../../../../pages/products/index.vue"],"sourcesContent":["<script setup>\n    import { useAuthStore } from '~/store/authStore';\n\n    const runtimeConfig = useRuntimeConfig();\n    const API_URL = runtimeConfig.public.API_URL;\n\n    // const scrollControl = ref(0);\n    const {data:products} = await useFetch(`${API_URL}/products`);\n    const loading = ref(false);\n\n    // onMounted(()=>{\n    //     if(process.client){\n    //         window.addEventListener(\"scroll\", handleScroll);\n    //     }\n    // })\n\n    // function handleScroll() {\n    //     var element = document.body;\n    //     if(window.innerHeight + window.scrollY >= element.clientHeight - 20){\n    //         const time = Date.now();\n    //         if((time > scrollControl.value + 1000 )|| (scrollControl.value == 0)){\n    //             scrollControl.value = time\n    //             loading.value = true;\n    //                 setTimeout(function(){\n    //                     products.value.push(...[7,8,9])\n    //                     loading.value = false;\n    //                 }, 3000)\n    //         }  \n    //     }\n    // }\n\n    const authStore = useAuthStore();\n</script>\n\n<template>\n    <NuxtLayout name=\"main\">\n        <template #content>\n            <div class=\"pt-24 px-4 pb-10 bg-neutral-50\">\n                <h1 class=\"text-center pb-10 text-black\">Produtos</h1>\n                <div class=\"flex justify-center\">\n                    <div class=\"md:w-4/5\">\n                        <div v-if=\"authStore.hasPermission(['ADMIN','MANAGER'])\" class=\"flex justify-end md:pr-6 pb-6\">\n                            <NuxtLink to=\"/products/list\">\n                                <span class=\"btn hover:text-primary text-white\">Gerenciar\n                                    <Icon class=\"w-6 h-auto\" name=\"material-symbols:app-registration\" color=\"white\"></Icon>\n                                </span>\n                            </NuxtLink>\n                        </div>\n                        <div class=\"grid md:grid-cols-2 lg:grid-cols-3 md:gap-8 lg:gap-10\">\n                            <Product v-for=\"product in products\" :key=\"product.id\" :link=\"product.link\" :photo=\"product.photo\" :title=\"product.title\" />\n                        </div>\n                        <div v-show=\"loading\" class=\"text-center pt-8\">\n                            <span class=\"loading loading-spinner loading-md\"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </template>\n    </NuxtLayout>\n</template>"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGI,UAAM,gBAAiC;AACvC,UAAM,UAAU,cAAc,OAAO;AAGrC,UAAM,EAAC,MAAK,SAAQ,KAAU,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAS,GAAG,iCAAkB,CAAA;AAC5D,UAAM,UAAU,IAAI,KAAK;AAuBzB,UAAM,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}