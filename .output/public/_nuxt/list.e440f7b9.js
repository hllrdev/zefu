import{_ as y,f as k,r as p,H as w,q as C,j as I,w as c,k as $,o as m,a as t,b as s,d as A,c as v,E as D,l as f,F as E,G as P,t as S,p as B,e as j}from"./entry.58710a5b.js";import{_ as L}from"./nuxt-link.f6550055.js";import{_ as q}from"./layout.57285c1e.js";const i=l=>(B("data-v-b482803c"),l=l(),j(),l),N={class:"pt-24 px-4 pb-10"},F=i(()=>t("h1",{class:"text-center pb-6"},"Gerenciamento de produtos",-1)),V={class:"flex justify-center"},R={class:"md:w-4/5 lg:w-3/5"},z={class:"flex justify-end md:pr-6 pb-6"},G={class:"flex items-center gap-2"},H={class:"overflow-x-auto"},M={class:"table"},T=i(()=>t("thead",null,[t("tr",null,[t("th",null,"Produto"),t("th",null,"Ações")])],-1)),U={class:"flex items-center"},J={class:"avatar"},K={class:"mask mask-squircle w-12 h-12"},O=["src"],Q={class:"flex flex-col md:flex-row justify-center items-center"},W=["onClick"],X={id:"delete_dialog",class:"modal modal-bottom sm:modal-middle"},Y={method:"dialog",class:"modal-box bg-neutral-100"},Z=i(()=>t("h3",{class:"font-bold text-lg"},"Excluir produto",-1)),tt=i(()=>t("p",{class:"py-4"},"Deseja excluir esse produto?",-1)),et={class:"modal-action"},ot={__name:"list",setup(l){const d=$().public.API_URL,h=k(),n=p([]),a=p("");w(async()=>{const o=await C(`${d}/products`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},"$AEDq4dj8VF");n.value=o.value});const x=o=>{a.value=o,document.getElementById("delete_dialog").showModal()},b=async()=>{await $fetch(`${d}/products/${a.value}`,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>{n.value=n.value.filter(o=>o.id!=a.value),a.value="",h.setAlert(!0,"success","Produto excluído com sucesso.")}).catch(()=>{h.setAlert(!0,"error","Houve um erro na tentativa de exclusão.")})};return(o,r)=>{const _=P,u=L,g=q;return m(),I(g,{name:"main"},{content:c(()=>[t("div",N,[F,t("div",V,[t("div",R,[t("div",z,[s(u,{class:"btn hover:text-primary",to:"/products/add"},{default:c(()=>[t("div",G,[A(" Cadastrar "),s(_,{class:"w-6 h-auto",name:"gridicons:add",color:"white"})])]),_:1})]),t("div",H,[t("table",M,[T,t("tbody",null,[(m(!0),v(E,null,D(f(n),e=>(m(),v("tr",{key:e.id},[s(u,{to:{path:"/products/view",query:{title:e.title,link:e.link,photo:e.photo}}},{default:c(()=>[t("td",null,[t("div",U,[t("div",J,[t("div",K,[t("img",{src:`${f(d)}/static${e.photo}`,alt:"Photo product"},null,8,O)])]),t("span",null,S(e.title),1)])])]),_:2},1032,["to"]),t("td",null,[t("div",Q,[s(u,{to:{path:"/products/edit",query:{id:e.id,title:e.title,link:e.link,photo:e.photo}}},{default:c(()=>[s(_,{class:"cursor-pointer w-6 h-auto hover:text-primary",name:"material-symbols:edit"})]),_:2},1032,["to"]),t("div",{onClick:at=>x(e.id)},[s(_,{class:"cursor-pointer w-6 h-auto hover:text-primary",name:"material-symbols:delete"})],8,W)])])]))),128))])])]),t("dialog",X,[t("form",Y,[Z,tt,t("div",et,[t("button",{class:"btn hover:bg-neutral-900",onClick:r[0]||(r[0]=e=>a.value="")},"Cancelar"),t("button",{class:"btn hover:bg-red-600 hover:border-red-600",onClick:b},"Confirmar")])])])])])])]),_:1})}}},it=y(ot,[["__scopeId","data-v-b482803c"]]);export{it as default};
