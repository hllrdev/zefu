import{_ as g}from"./Input.f5e59ea7.js";import{_ as y}from"./nuxt-link.cd74cfd3.js";import{_ as w}from"./layout.b39c5b86.js";import{f as $,r as k,g as A,h as C,i as L,j as R,w as c,k as V,o as l,a as e,b as u,l as a,c as N,t as S,m as q,d as B,n as D,v as E,q as P}from"./entry.0c1eaa11.js";import{u as U,c as m,r as F,e as I}from"./index.56505eb7.js";const O={action:"",class:"py-6"},T=e("h1",{class:"text-center pb-6"},"Recuperar senha",-1),j={class:"pb-6"},M={key:0,class:"text-error font-medium text-xs"},z={class:"text-sm text-center pb-4"},H=e("span",{class:"font-semibold ml-2"},"Entrar",-1),K={class:"flex flex-col items-center"},Y=e("span",{class:"loading loading-spinner loading-md mb-2"},null,-1),G=e("p",{class:"text-xs"},"Aguarde um instante",-1),J=[Y,G],ae={__name:"recovery",setup(Q){const o=$(),n=k(!1),_=A(),d=V().public.API_URL,p=async()=>{if(s.value.$validate(),!s.value.$error){n.value=!0;const i=r.email;await P(`${d}/auth/recovery`,{method:"POST",headers:{"Content-Type":"application/json"},body:{email:i},onResponse({response:t}){t.status==200?(o.setAlert(!0,"success","E-mail enviado. Vá a sua caixa de entrada, verifique o spam."),_.push("/auth/signin")):t.status==404?o.setAlert(!0,"error","Usuário não encontrado."):o.setAlert(!0,"error","Houve um problema. O e-mail não foi enviado."),n.value=!1}},"$KhzOYStLdL")}},r=C({email:""}),h=L(()=>({email:{required:m.withMessage("Preencha o e-mail",F),email:m.withMessage("Formato de e-mail inválido",I)}})),s=U(h,r);return(i,t)=>{const f=g,x=y,v=w;return l(),R(v,{name:"auth"},{content:c(()=>[e("div",null,[e("form",O,[T,e("div",j,[u(f,{name:"email",type:"email",label:"E-mail",placeholder:"Digite aqui seu e-mail","onUpdate:modelValue":t[0]||(t[0]=b=>a(r).email=b)}),a(s).email.$error?(l(),N("span",M,S(a(s).email.$errors[0].$message),1)):q("",!0)]),e("button",{type:"button",class:"btn btn-secondary text-neutral-50 w-full",onClick:p},"Recuperar")]),e("p",z,[B("Lembrou a senha? "),u(x,{to:"/auth/signin"},{default:c(()=>[H]),_:1})]),D(e("div",K,J,512),[[E,a(n)]])])]),_:1})}}};export{ae as default};
